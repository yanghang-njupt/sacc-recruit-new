"use strict";(self["webpackChunksacc_recruit_new"]=self["webpackChunksacc_recruit_new"]||[]).push([[601],{9601:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"uploadPage"},[t("router-view"),t("div",{staticClass:"answer-content"},[t("div",{staticClass:"content-body"},[t("div",{staticClass:"top-head"},[t("p",{staticClass:"body-title"},[e._v(e._s(e.title))]),t("el-link",{staticClass:"backBtn",attrs:{type:"primary",underline:!1},on:{click:e.back}},[e._v("返回")])],1),t("div",{staticClass:"description"},[t("p",{domProps:{innerHTML:e._s(e.problemDescription)}})]),t("div",{staticClass:"title-body"},e._l(e.listObj,(function(a){return t("div",{key:a.id,staticClass:"user-title"},[t("div",{staticClass:"title-head"},[t("div",[e._v(e._s(a.id)+".")]),t("el-tag",{staticClass:"tag"},[e._v(e._s(a.type))]),t("div",{domProps:{innerHTML:e._s(a.title)}})],1),t("div",{staticClass:"title-content"},["单选"===a.type?t("div",{staticClass:"radioBox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"radio",name:a.id,value:"A"},domProps:{checked:e._q(a.value,"A")},on:{change:function(t){return e.$set(a,"value","A")}}}),e._v(" "+e._s(a.A))]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"radio",name:a.id,value:"B"},domProps:{checked:e._q(a.value,"B")},on:{change:function(t){return e.$set(a,"value","B")}}}),e._v(" "+e._s(a.B))]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"radio",name:a.id,value:"C"},domProps:{checked:e._q(a.value,"C")},on:{change:function(t){return e.$set(a,"value","C")}}}),e._v(" "+e._s(a.C))]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"radio",name:a.id,value:"D"},domProps:{checked:e._q(a.value,"D")},on:{change:function(t){return e.$set(a,"value","D")}}}),e._v(" "+e._s(a.D))])]):"多选"===a.type?t("div",{staticClass:"checkBox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"checkbox",name:a.id,value:"A"},domProps:{checked:Array.isArray(a.value)?e._i(a.value,"A")>-1:a.value},on:{change:function(t){var i=a.value,l=t.target,r=!!l.checked;if(Array.isArray(i)){var o="A",s=e._i(i,o);l.checked?s<0&&e.$set(a,"value",i.concat([o])):s>-1&&e.$set(a,"value",i.slice(0,s).concat(i.slice(s+1)))}else e.$set(a,"value",r)}}}),e._v(" "+e._s(a.A))]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"checkbox",value:"B"},domProps:{checked:Array.isArray(a.value)?e._i(a.value,"B")>-1:a.value},on:{change:function(t){var i=a.value,l=t.target,r=!!l.checked;if(Array.isArray(i)){var o="B",s=e._i(i,o);l.checked?s<0&&e.$set(a,"value",i.concat([o])):s>-1&&e.$set(a,"value",i.slice(0,s).concat(i.slice(s+1)))}else e.$set(a,"value",r)}}}),e._v(" "+e._s(a.B))]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"checkbox",value:"C"},domProps:{checked:Array.isArray(a.value)?e._i(a.value,"C")>-1:a.value},on:{change:function(t){var i=a.value,l=t.target,r=!!l.checked;if(Array.isArray(i)){var o="C",s=e._i(i,o);l.checked?s<0&&e.$set(a,"value",i.concat([o])):s>-1&&e.$set(a,"value",i.slice(0,s).concat(i.slice(s+1)))}else e.$set(a,"value",r)}}}),e._v(" "+e._s(a.C))]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"checkbox",value:"D"},domProps:{checked:Array.isArray(a.value)?e._i(a.value,"D")>-1:a.value},on:{change:function(t){var i=a.value,l=t.target,r=!!l.checked;if(Array.isArray(i)){var o="D",s=e._i(i,o);l.checked?s<0&&e.$set(a,"value",i.concat([o])):s>-1&&e.$set(a,"value",i.slice(0,s).concat(i.slice(s+1)))}else e.$set(a,"value",r)}}}),e._v(" "+e._s(a.D))])]):e._e(),a.imgUrl?t("div",{staticClass:"img"},e._l(a.imgUrl,(function(e,a){return t("div",{key:a},[t("img",{staticStyle:{height:"35vh","object-fit":"contain","text-align":"left"},attrs:{src:e,alt:"图片"}})])})),0):e._e()])])})),0),t("div",{staticClass:"title-footer",staticStyle:{"margin-top":"2vh"}},[t("el-button",{staticStyle:{width:"10vw",height:"5vh"},attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("上传题目")])],1)]),t("el-dialog",{attrs:{title:"新建题目",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},click:e.newTitle}},[t("el-form",{attrs:{model:e.form}},[t("el-form-item",{attrs:{label:"题目","label-width":e.formLabelWidth,rules:e.rules,prop:"titleContent"}},[t("el-input",{attrs:{type:"textarea",row:2,autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),t("p",{domProps:{innerHTML:e._s(e.markdown)}})],1),t("el-form-item",{attrs:{label:"题目类型","label-width":e.formLabelWidth,rules:e.rules,prop:"titleType"}},[t("el-select",{attrs:{placeholder:"题目类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[t("el-option",{attrs:{label:"单选",value:"单选"}}),t("el-option",{attrs:{label:"多选",value:"多选"}}),t("el-option",{attrs:{label:"简答",value:"简答"}})],1)],1),t("el-form-item",{attrs:{label:"题目分数","label-width":e.formLabelWidth,rules:e.rules,prop:"titleScore"}},[t("el-input-number",{attrs:{min:1,max:10,label:"题目分数"},on:{change:e.handleChange},model:{value:e.form.scoring,callback:function(t){e.$set(e.form,"scoring",t)},expression:"form.scoring"}})],1),"简答"!==e.form.type?t("el-form-item",{attrs:{label:"A","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.A,callback:function(t){e.$set(e.form,"A",t)},expression:"form.A"}})],1):e._e(),"简答"!==e.form.type?t("el-form-item",{attrs:{label:"B","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.B,callback:function(t){e.$set(e.form,"B",t)},expression:"form.B"}})],1):e._e(),"简答"!==e.form.type?t("el-form-item",{attrs:{label:"C","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.C,callback:function(t){e.$set(e.form,"C",t)},expression:"form.C"}})],1):e._e(),"简答"!==e.form.type?t("el-form-item",{attrs:{label:"D","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.D,callback:function(t){e.$set(e.form,"D",t)},expression:"form.D"}})],1):e._e(),t("el-form-item",{attrs:{label:"是否上传图片","label-width":e.formLabelWidth}},[t("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"center","margin-top":"1vh"}},[t("el-radio",{attrs:{label:"是"},model:{value:e.form.isLoad,callback:function(t){e.$set(e.form,"isLoad",t)},expression:"form.isLoad"}},[e._v("是")]),t("el-radio",{attrs:{label:"否"},model:{value:e.form.isLoad,callback:function(t){e.$set(e.form,"isLoad",t)},expression:"form.isLoad"}},[e._v("否")])],1)])],1),"否"===e.form.isLoad?t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticStyle:{"margin-right":"1vw"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitNewTitle}},[e._v("确 定")])],1):t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticStyle:{"margin-right":"1vw"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-upload",{ref:"fileUpload",staticClass:"upload",attrs:{accept:".jpg,.jpeg,.png",action:"",headers:e.headerObj,limit:1,"http-request":e.handleRequest,"on-success":e.successLoad}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("确 定(含图片)")])],1)],1)],1)],1)],1)},l=[],r=a(9958),o=a(2900),s={name:"admin-upload",data(){return{title:"",description:"",listObj:[],answer:[],headerObj:{token:localStorage.getItem("token")},dialogTableVisible:!1,dialogFormVisible:!1,form:{title:"",type:"单选",scoring:1,A:"",B:"",C:"",D:"",isLoad:"否",imgLists:null},formLabelWidth:"120px",rules:{titleContent:{require:!0,message:"请输入题目内容",trigger:"blur"},titleType:{require:!0,message:"请输入题目类型",trigger:"blur"},titleScore:{require:!0,message:"请输入题目分数",trigger:"blur"}}}},methods:{back(){this.$router.push("/adminhome"),location.reload()},newTitle(){this.form={title:"",type:"单选",scoring:1,A:"",B:"",C:"",D:"",isLoad:"否",imgLists:null}},successLoad(){console.log("上传文件成功")},handleRequest(e){this.form.imgLists=e.file,(0,r.FY)(this.$route.params.unit,this.form).then((e=>{"true"===e.data.success?(this.$message.success("上传成功"),setTimeout((()=>{location.reload()}),2e3)):this.$message.error("上传失败,请重试")}))},submitNewTitle(){""===this.form.title?this.$message.warning("请输入题目内容"):"简答"===this.form.type||""!==this.form.A&&""!==this.form.B&&""!==this.form.C&&""!==this.form.D?((0,r.FY)(this.$route.params.unit,this.form).then((e=>{"true"===e.data.success?(this.$message.success("上传成功"),setTimeout((()=>{location.reload()}),2e3)):this.$message.error("上传失败,请重试")})),this.dialogFormVisible=!1):this.$message.warning("请输入选项内容")},sendFile(){this.$refs.fileUpload.submit()}},mounted(){(0,o._)(this.$router.currentRoute.params.unit).then((e=>{const t=e.data.data.listObj;t.forEach((e=>{if(e.title=e.title.replace(/\r\n/g,"<br />"),e.title=e.title.replace(/\r/g,"&nbsp;&nbsp;"),null!==e.imgUrl&&(e.imgUrl=e.imgUrl.split("|")),0===e.type)e.type="单选",e.value=e.content;else if(1===e.type){e.type="多选",e.value=[];for(let t in e.content)e.value.push(e.content[t])}else e.type="简答",e.value=e.content})),this.title=e.data.data.title,this.description=e.data.data.description,this.listObj=t})),-1!==location.href.indexOf("#reload")&&(location.href=location.href+"#reload",location.reload())}},n=s,c=a(1001),u=(0,c.Z)(n,i,l,!1,null,"9769776c",null),m=u.exports},9958:function(e,t,a){a.d(t,{FY:function(){return c},gy:function(){return l},jQ:function(){return r},q2:function(){return s},x:function(){return o},zN:function(){return n}});var i=a(4051);const l=e=>(0,i.J5)({method:"post",url:"/root/newUnit",data:{unitName:e.title,startTime:e.start,endTime:e.end,unitDescription:e.description}}),r=e=>{let t=new FormData;return t.append("fileList",e),(0,i.J5)({method:"post",url:"/root/importReader",data:t})},o=e=>(0,i.J5)({method:"post",url:"/root/updateRole",params:{stuId:e}}),s=(e,t)=>(0,i.J5)({method:"post",url:"/root/updateGroup",params:{stuId:e,group:t}}),n=e=>(e=Number(e),(0,i.J5)({method:"get",url:"/root/getJudger",params:{unitId:e}})),c=(e,t)=>{let a=new FormData;return a.append("title",t.title),a.append("scoring",Number(t.scoring)),"单选"===t.type?a.append("type",0):"多选"===t.type?a.append("type",1):"简答"===t.type?a.append("type",2):((void 0).$message.error("无效题目类型,请重试"),location.reload()),a.append("type",t.type),a.append("A",t.A),a.append("B",t.B),a.append("C",t.C),a.append("D",t.D),a.append("imgLists",t.imgLists),(0,i.J5)({method:"post",url:"/root/uploadProblem",params:{unit:e},data:a})}},2900:function(e,t,a){a.d(t,{E:function(){return r},_:function(){return l}});var i=a(4051);const l=e=>(e=Number(e),(0,i.J5)({method:"get",url:"/normal/getList?unitId="+e,data:{}})),r=(e,t)=>(0,i.J5)({method:"post",url:"/normal/commitAnswer",data:e,params:{unitId:t}})}}]);
//# sourceMappingURL=601.b1bd5703.js.map