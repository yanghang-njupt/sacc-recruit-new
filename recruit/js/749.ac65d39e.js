"use strict";(self["webpackChunksacc_recruit_new"]=self["webpackChunksacc_recruit_new"]||[]).push([[749],{2957:function(t,e,i){i.d(e,{Z:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"head"}),e("div",{staticClass:"topHead"},[e("img",{staticClass:"logo",staticStyle:{"margin-top":"3.2vh"},attrs:{src:i(4852),alt:"logo"}}),e("div",{staticClass:"end"},[t._m(0),e("p",{staticClass:"avatar-name"},[t._v(t._s(t.username))]),e("router-link",{attrs:{to:{path:"/login"}}},[e("p",{staticClass:"out",on:{click:t.exit}},[t._v("退出登录")])])],1)])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"block"},[e("img",{staticStyle:{"object-fit":"cover",height:"3.8vh",width:"3.8vh"},attrs:{src:i(3786),alt:"头像"}})])}],a={name:"topHead",data(){return{username:""}},methods:{exit(){this.$store.commit("LOGIN_OUT","token")}},mounted(){this.username=localStorage.getItem("userID")}},o=a,n=i(1001),l=(0,n.Z)(o,s,r,!1,null,null,null),d=l.exports},7749:function(t,e,i){i.r(e),i.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"adminindex"},[e("top-head"),e("router-view"),t.isAdminHome?e("div",{staticClass:"body"},[e("el-dialog",{attrs:{title:"新建活动",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.form}},[e("el-form-item",{attrs:{prop:"unitTitle",rules:t.rules}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"输入题目标题"},model:{value:t.form.unit_name,callback:function(e){t.$set(t.form,"unit_name",e)},expression:"form.unit_name"}})],1),e("el-form-item",{attrs:{prop:"unitStart",rules:t.rules}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择活动开始日期",format:"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.start_time,callback:function(e){t.$set(t.form,"start_time",e)},expression:"form.start_time"}})],1),e("el-form-item",{attrs:{prop:"unitEnd",rules:t.rules}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择活动截止日期",format:"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.end_time,callback:function(e){t.$set(t.form,"end_time",e)},expression:"form.end_time"}})],1),e("el-form-item",{attrs:{prop:"unitContent",rules:t.rules}},[e("el-input",{attrs:{type:"textarea",autocomplete:"off",placeholder:"输入活动描述"},model:{value:t.form.unit_description,callback:function(e){t.$set(t.form,"unit_description",e)},expression:"form.unit_description"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.upLoadnewNuit}},[t._v("确 定")])],1)],1),e("el-card",{staticClass:"box-card",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"newTitle",on:{click:function(e){t.dialogFormVisible=!0}}},[e("span",{staticClass:"iconfont icon-jia"}),e("p",{staticStyle:{"font-size":"2vh","font-weight":"800"}},[t._v("新建活动")])])]),t._l(t.list,(function(i){return e("el-card",{key:i.unit_id,staticClass:"box-card"},[e("div",{staticClass:"item-info"},[e("p",{staticClass:"item-title"},[t._v(t._s(i.unit_name))]),e("p",{staticClass:"item-date"},[t._v("起止时间: "+t._s(i.start_time)+"-"+t._s(i.end_time))]),e("p",{staticClass:"item-body",staticStyle:{display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"3",overflow:"hidden"},domProps:{innerHTML:t._s(i.unit_description)}})]),e("div",{staticClass:"Foot"},[e("div",{staticClass:"footer"},[e("span",{staticClass:"footer-state"},[e("p",{staticStyle:{padding:"0"}},[t._v("状态:")]),e("p",{class:!1===i.isLate?"activity-doing":"activity-end",staticStyle:{padding:"0"}},[t._v("  "+t._s(!1===i.isLate?"进行中":"不在规定时间")+" ")])]),e("el-button",{staticClass:"footer-btn",attrs:{type:"primary",disabled:!1!==i.isLate},on:{click:function(e){return t.goUploadTitle(i.unit_id)}}},[t._v("上传题目")]),e("el-button",{staticClass:"footer-btn",attrs:{type:"primary"},on:{click:function(e){return t.gosetting(i.unit_id)}}},[t._v("设置阅卷人")])],1)])])}))],2):t._e()],1)},r=[],a=i(2957),o=i(4051),n=i(9958),l={name:"admin-index",data(){return{newTitlte:"",newStart:"",newEnd:"",newContent:"",isAdminHome:!0,list:[],form:{unit_name:"",start_time:"",end_time:"",unit_description:""},dialogTableVisible:!1,dialogFormVisible:!1,formLabelWidth:"120px",rules:{unitTitle:{requried:!0,message:"请输入活动标题",trigger:"blur"},unitStart:[{requried:!0,message:"请输入活动标题",trigger:"blur"},{min:19,max:19,message:"请按照2000-01-01 01:01:01的格式来输入时间",trigger:"blur"}],unitEnd:[{requried:!0,message:"请输入活动标题",trigger:"blur"},{min:19,max:19,message:"请按照xxxx-xx-xx xx:xx:xx的格式来输入时间",trigger:"blur"}],unitContent:{requried:!0,message:"请输入活动描述",trigger:"blur"}}}},components:{topHead:a.Z},methods:{gosetting(t){this.$router.push(`/adminhome/setting/${t}`)},goUploadTitle(t){this.$router.push(`/adminhome/upload/${t}`)},upLoadnewNuit(){this.dialogFormVisible=!1;const t=new Date(this.form.start_time).toISOString(),e=new Date(this.form.end_time).toISOString(),i=String(t).split("."),s=String(e).split(".");let r=[];r=i[0].split("T"),this.form.start_time=r[0]+" "+r[1],r=s[0].split("T"),this.form.end_time=r[0]+" "+r[1];const a={title:this.form.unit_name,start:this.form.start_time,end:this.form.end_time,description:this.form.unit_description};(0,n.gy)(a).then((t=>{"新建比赛成功"===t.data.msg?(this.$message({message:"新建比赛成功",type:"success"}),window.setTimeout((()=>{location.reload()}),1e3)):this.$message({message:"新建比赛失败",type:"error"})}))}},mounted(){"2"===localStorage.getItem("role")?"/adminhome"===this.$router.currentRoute.path?((0,o.Ct)().then((t=>{const e=t.data.data;for(let i=0;i<e.length;i++)if(e[i].start_time&&e[i].end_time){let t=e[i].start_time.substr(0,10),s=e[i].end_time.substr(0,10);s=s.split("-"),t=t.split("-"),e[i].start_time=t[1]+"月"+t[2]+"日",e[i].end_time=+s[1]+"月"+s[2]+"日"}e.sort(((t,e)=>!0===e.isLate?-1:0)),this.list=e})),this.isAdminHome=!0):this.isAdminHome=!1:this.$router.back()},updated(){"/adminhome"===this.$router.currentRoute.path?this.isAdminHome=!0:this.isAdminHome=!1}},d=l,m=i(1001),u=(0,m.Z)(d,s,r,!1,null,"cd412db8",null),c=u.exports},9958:function(t,e,i){i.d(e,{FY:function(){return d},gy:function(){return r},jQ:function(){return a},q2:function(){return n},x:function(){return o},zN:function(){return l}});var s=i(4051);const r=t=>(0,s.J5)({method:"post",url:"/root/newUnit",data:{unitName:t.title,startTime:t.start,endTime:t.end,unitDescription:t.description}}),a=t=>{let e=new FormData;return e.append("fileList",t),(0,s.J5)({method:"post",url:"/root/importReader",data:e})},o=t=>(0,s.J5)({method:"post",url:"/root/updateRole",params:{stuId:t}}),n=(t,e)=>(0,s.J5)({method:"post",url:"/root/updateGroup",params:{stuId:t,group:e}}),l=t=>(t=Number(t),(0,s.J5)({method:"get",url:"/root/getJudger",params:{unitId:t}})),d=(t,e)=>{let i=new FormData;return i.append("title",e.title),i.append("scoring",Number(e.scoring)),"单选"===e.type?i.append("type",0):"多选"===e.type?i.append("type",1):"简答"===e.type?i.append("type",2):((void 0).$message.error("无效题目类型,请重试"),location.reload()),i.append("type",e.type),i.append("A",e.A),i.append("B",e.B),i.append("C",e.C),i.append("D",e.D),i.append("imgLists",e.imgLists),(0,s.J5)({method:"post",url:"/root/uploadProblem",params:{unit:t},data:i})}},3786:function(t,e,i){t.exports=i.p+"img/avatar.7c3538f0.png"},4852:function(t,e,i){t.exports=i.p+"img/sacclogo.e58a6992.png"}}]);
//# sourceMappingURL=749.ac65d39e.js.map