"use strict";(self["webpackChunksacc_recruit_new"]=self["webpackChunksacc_recruit_new"]||[]).push([[801],{4801:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"gradePage"},[t("div",{staticClass:"answer-content"},[t("div",{staticClass:"content-body"},[t("div",{staticClass:"top-head"},[t("p",{staticClass:"body-title"},[e._v(e._s(e.unit_name))]),t("span",{staticClass:"user-info"},[t("p",{staticStyle:{color:"#2a82e4","margin-left":"2vw"}},[e._v("答题人：")]),t("p",[e._v(e._s(this.$route.params.stuId))])]),t("div",{staticClass:"space"}),t("el-link",{staticClass:"backBtn",attrs:{type:"primary",underline:!1},on:{click:e.back}},[e._v("返回")]),t("el-link",{staticClass:"nextBtn",attrs:{type:"primary",underline:!1},on:{click:e.next}},[e._v("下一份")])],1),t("div",{staticClass:"description",domProps:{innerHTML:e._s(e.unit_description)}}),t("div",{staticClass:"title-body"},e._l(e.problem_list,(function(a,s){return t("div",{key:a.id,staticClass:"user-title"},[t("div",{staticClass:"title-head"},[t("div",[e._v(e._s(s)+".")]),t("el-tag",{staticClass:"tag"},[e._v(e._s(a.problemType))]),t("div",{domProps:{innerHTML:e._s(a.problemDesription)}})],1),t("div",{staticClass:"title-content"},["单选"===a.problemType?t("div",{staticClass:"radioBox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"radio",name:a.id,value:"A",disabled:""},domProps:{checked:e._q(a.value,"A")},on:{change:function(t){return e.$set(a,"value","A")}}}),e._v(" "+e._s(a.optionA))]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"radio",name:a.id,value:"B",disabled:""},domProps:{checked:e._q(a.value,"B")},on:{change:function(t){return e.$set(a,"value","B")}}}),e._v(" "+e._s(a.optionB))]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"radio",name:a.id,value:"C",disabled:""},domProps:{checked:e._q(a.value,"C")},on:{change:function(t){return e.$set(a,"value","C")}}}),e._v(" "+e._s(a.optionC))]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"radio",name:a.id,value:"D",disabled:""},domProps:{checked:e._q(a.value,"D")},on:{change:function(t){return e.$set(a,"value","D")}}}),e._v(" "+e._s(a.optionD))])]):"多选"===a.problemType?t("div",{staticClass:"checkBox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"checkbox",name:a.id,value:"A",disabled:""},domProps:{checked:Array.isArray(a.value)?e._i(a.value,"A")>-1:a.value},on:{change:function(t){var s=a.value,i=t.target,r=!!i.checked;if(Array.isArray(s)){var l="A",n=e._i(s,l);i.checked?n<0&&e.$set(a,"value",s.concat([l])):n>-1&&e.$set(a,"value",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(a,"value",r)}}}),e._v(" "+e._s(a.optionA))]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"checkbox",name:a.id,value:"B",disabled:""},domProps:{checked:Array.isArray(a.value)?e._i(a.value,"B")>-1:a.value},on:{change:function(t){var s=a.value,i=t.target,r=!!i.checked;if(Array.isArray(s)){var l="B",n=e._i(s,l);i.checked?n<0&&e.$set(a,"value",s.concat([l])):n>-1&&e.$set(a,"value",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(a,"value",r)}}}),e._v(" "+e._s(a.optionB))]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"checkbox",name:a.id,value:"C",disabled:""},domProps:{checked:Array.isArray(a.value)?e._i(a.value,"C")>-1:a.value},on:{change:function(t){var s=a.value,i=t.target,r=!!i.checked;if(Array.isArray(s)){var l="C",n=e._i(s,l);i.checked?n<0&&e.$set(a,"value",s.concat([l])):n>-1&&e.$set(a,"value",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(a,"value",r)}}}),e._v(" "+e._s(a.optionC))]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],attrs:{type:"checkbox",name:a.id,value:"D",disabled:""},domProps:{checked:Array.isArray(a.value)?e._i(a.value,"D")>-1:a.value},on:{change:function(t){var s=a.value,i=t.target,r=!!i.checked;if(Array.isArray(s)){var l="D",n=e._i(s,l);i.checked?n<0&&e.$set(a,"value",s.concat([l])):n>-1&&e.$set(a,"value",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(a,"value",r)}}}),e._v(" "+e._s(a.optionD))])]):"简答"===a.problemType?t("div",{staticClass:"inputBox"},[t("el-input",{staticClass:"input",attrs:{type:"textarea",rows:4,placeholder:"在此输入你的答案",disabled:""},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}})],1):e._e(),a.pictureUrl?t("div",{staticClass:"img"},[t("img",{staticStyle:{height:"35vh","object-fit":"contain","text-align":"left"},attrs:{src:a.pictureUrl,alt:"图片"}})]):e._e()]),t("div",{staticClass:"title-score"},[t("p",[e._v("分数：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.score,expression:"item.score"}],staticClass:"score-input",attrs:{type:"number",placeholder:"请输入得分"},domProps:{value:a.score},on:{input:function(t){t.target.composing||e.$set(a,"score",t.target.value)}}})])])})),0),t("div",{staticClass:"title-footer"},[t("el-button",{staticClass:"btn",attrs:{type:"primary","cursor:pointer":""},on:{click:e.submitAnswer}},[e._v("提交批改")])],1)])])])},i=[],r=a(1289),l={name:"grade-page",data(){return{problem_list:[],unit_name:"",unit_description:"",scoreInput:[],nextStuId:""}},methods:{submitAnswer(){this.scoreInput=[];for(let e of this.listObj)this.scoreInput.push({id:Number(e.id),score:Number(e.score)});(0,r.jV)(this.scoreInput).then((e=>{"true"===e.data.success?(0,r.xi)(this.$route.params.stuId).then((e=>{null===e.data.data?this.$message.success("这是最后一份, 已批改完"):(this.$message.success("批改成功,自动跳转下一份..."),this.$router.push(`/operatorhome/answer/${this.$router.currentRoute.params.unit}/${e.data.data}`),location.reload(),(0,r.sj)(this.$route.params.unit,this.$route.params.stuId).then((e=>{console.log(e.data);const t=e.data.data.DataOfOne;t.forEach((e=>{if(e.imgUrl=JSON.stringify(e.imgUrl),e.title=e.title.replace(/\r\n/g,"<br />"),e.title=e.title.replace(/\r/g,"&nbsp;&nbsp;"),console.log(e.imgUrl),0===e.type)e.type="单选",e.value=e.content;else if(1===e.type){e.type="多选",e.value=[];for(let t in e.content)e.value.push(e.content[t])}else e.type="简答",e.value=e.content})),this.title=e.data.data.title,this.content=e.data.data.content,this.listObj=t})))})):this.$message({message:e.data.data,type:"warning"})}))},back(){this.$router.go(-1)},next(){(0,r.xi)(this.$route.params.stuId).then((e=>{console.log(e.data,"nextstuId"),"null"===e.data.data?this.$message.success("这是最后一份, 已批改完"):(this.$router.push(`/operatorhome/answer/${this.$router.currentRoute.params.unit}/${e.data.data}`),location.reload())}))}},mounted(){"1"===localStorage.getItem("role")?(0,r.sj)(this.$route.params.unit_id,this.$route.params.stuId).then((e=>{if("null"===e.data.data)this.$router.back(-1),this.$message.warning("该学号不存在");else{console.log(e.data);const t=e.data.data.problem_list;t.forEach((e=>{if(null!==e.pictureUrl&&(e.pictureUrl+="|",e.pictureUrl=e.pictureUrl.split("|")),0===e.problemType)e.problemType="单选",e.value=e.content;else if(1===e.problemType){e.problem_type="多选",e.value=[];for(let t in e.content)e.value.push(e.content[t])}else e.problem_type="简答",e.value=e.content})),this.unit_name=e.data.data.unit_name,this.unit_description=e.data.data.unit_description,this.problem_list=t}})):this.$router.back()}},n=l,o=a(1001),c=(0,o.Z)(n,s,i,!1,null,"8e3811ac",null),u=c.exports},1289:function(e,t,a){a.d(t,{Nm:function(){return i},jV:function(){return l},sj:function(){return r},xi:function(){return n}});var s=a(4051);const i=e=>(0,s.J5)({method:"get",url:"/judger/getList?unitId="+e,data:{}}),r=(e,t)=>(0,s.J5)({method:"get",url:"/judger/getOne",params:{unitId:e,stuId:t},data:{}}),l=e=>{let t=[];for(let a of e)t.push({id:a.id,score:a.score});return t=JSON.stringify(t),(0,s.J5)({method:"post",headers:{"content-Type":"application/json"},url:"/reader/judge",data:t})},n=e=>(0,s.J5)({method:"get",url:"/reader/getNextStuId",params:{stuId:e}})}}]);
//# sourceMappingURL=801.4cfda169.js.map