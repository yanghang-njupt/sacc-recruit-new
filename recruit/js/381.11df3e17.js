"use strict";(self["webpackChunksacc_recruit_new"]=self["webpackChunksacc_recruit_new"]||[]).push([[381],{3381:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"settingPage"}},[t("div",{staticClass:"detail-body"},[t("div",{staticClass:"body-head"},[t("p",{staticClass:"body-title"},[e._v(e._s(e.unit_name))]),t("el-link",{staticClass:"backBtn",attrs:{type:"primary",underline:!1},on:{click:e.back}},[e._v("返回")])],1),t("div",{staticClass:"body-main"},[t("el-table",{staticStyle:{width:"100%"},attrs:{height:"80vh",data:e.judger_list}},[t("el-table-column",{attrs:{prop:"judgerId",label:"阅卷人学号"}}),t("el-table-column",{attrs:{prop:"finishedCorrectNum",label:"批改情况"}}),t("el-table-column",{attrs:{prop:"grouped",label:"设置分组"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-select",{attrs:{"allow-create":"",placeholder:"请选择"},on:{change:function(t){return e.changeValue(t,a.row.judgerId)}},model:{value:a.row.grouped,callback:function(t){e.$set(a.row,"grouped",t)},expression:"scope.row.grouped"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),t("el-table-column",{key:"slot",attrs:{fixed:"right",label:"操作"}},[[t("el-button",{attrs:{size:"mini",type:"primary",plain:"","cursor:pointer":""},on:{click:e.handleDelete}},[e._v("删除")])]],2)],1),t("div",{staticClass:"describe_info",staticStyle:{width:"12vw"}},[t("div",{staticClass:"title-info"},[t("h2",[e._v("问题总数: "+e._s(e.total_judged_num))]),t("h2",[e._v("批改情况: "+e._s(e.total_finished_num))])]),t("div",{staticClass:"do-info"},[t("el-button",{staticStyle:{"margin-top":"1vh",width:"5vw","font-size":"0.3vw",padding:"1vh"},attrs:{size:"small",type:"primary"},on:{click:e.Clear}},[e._v("一键删除")]),t("div",{staticClass:"btn"},[t("el-upload",{ref:"fileUpload",staticClass:"upload",attrs:{accept:".xls,.xlsx",action:"",headers:e.headerObj,limit:1,"http-request":e.handleRequest,"on-success":e.successLoad}},[t("el-button",{staticStyle:{"margin-top":"1vh",width:"6vw","margin-left":"0","font-size":"0.3vw",padding:"1vh"},attrs:{size:"small","cursor:pointer":"",type:"primary"}},[e._v("批量导入阅卷人")])],1),t("p",{staticClass:"btn_info"},[e._v("支持Excel文件")])],1),t("div",{staticStyle:{"font-size":"1.4vh","margin-top":"1vh",display:"flex","flex-direction":"row","white-space":"nowrap","justify-content":"space-around","align-items":"center"}},[e._v(" 添加阅卷人:"),t("el-input",{staticStyle:{"margin-left":"0.5vw"},attrs:{placeholder:"输入已有用户学号",size:"small"},on:{change:e.addOperator},model:{value:e.newOperator,callback:function(t){e.newOperator=t},expression:"newOperator"}})],1)],1)])],1)])])},r=[],n=a(9958),o={data(){return{unit_name:"",newOperator:"",total_judged_num:0,total_finished_num:0,judger_list:[],headerObj:{token:localStorage.getItem("token")},options:[{value:"前端",label:"前端"},{value:"后端",label:"后端"},{value:"算法",label:"算法"},{value:"python",label:"python"},{value:"安全",label:"安全"}]}},mounted(){"2"===localStorage.getItem("role")?(console.log(this.$route.params),(0,n.zN)(this.$route.params.unit_id).then((e=>{const t=e.data.data;this.unit_name=t.unit_name,this.judger_list=t.judger_list,this.total_finished_num=t.total_finished_num,this.total_judged_num=t.total_judged_num}))):this.$router.back()},methods:{back(){this.$router.push("/adminhome"),location.reload()},handleDelete(){this.$message({message:"删不掉，怎么想都删不掉",type:"error"})},Clear(){this.$message({message:"请不要这样做",type:"warning"})},changeValue(e,t){(0,n.q2)(t,e).then((({data:{data:e}})=>{this.$message.success(e)})).catch((e=>{console.error(e)}))},addOperator(){console.log(this.newOperator),(0,n.x)(this.newOperator).then((e=>{"数据库中没有该用户!"===e.data.errMsg?this.$message.error("数据库中没有此用户"):(this.$message.success("添加成功"),location.reload()),this.newOperator=""}))},successLoad(){console.log("上传文件成功")},handleRequest(e){(0,n.jQ)(e.file).then((e=>{"true"===e.data.success&&(this.$message.success("上传成功"),setTimeout((()=>{location.reload()}),2e3))}))},sendFile(){this.$refs.fileUpload.submit()}}},l=o,i=a(1001),u=(0,i.Z)(l,s,r,!1,null,"3a1849ec",null),d=u.exports},9958:function(e,t,a){a.d(t,{FY:function(){return u},gy:function(){return r},jQ:function(){return n},q2:function(){return l},x:function(){return o},zN:function(){return i}});var s=a(4051);const r=e=>(0,s.J5)({method:"post",url:"/root/newUnit",data:{unitName:e.title,startTime:e.start,endTime:e.end,unitDescription:e.description}}),n=e=>{let t=new FormData;return t.append("fileList",e),(0,s.J5)({method:"post",url:"/root/importReader",data:t})},o=e=>(0,s.J5)({method:"post",url:"/root/updateRole",params:{stuId:e}}),l=(e,t)=>(0,s.J5)({method:"post",url:"/root/updateGroup",params:{stuId:e,group:t}}),i=e=>(e=Number(e),(0,s.J5)({method:"get",url:"/root/getJudger",params:{unitId:e}})),u=(e,t)=>{let a=new FormData;return a.append("title",t.title),a.append("scoring",Number(t.scoring)),"单选"===t.type?a.append("type",0):"多选"===t.type?a.append("type",1):"简答"===t.type?a.append("type",2):((void 0).$message.error("无效题目类型,请重试"),location.reload()),a.append("type",t.type),a.append("A",t.A),a.append("B",t.B),a.append("C",t.C),a.append("D",t.D),a.append("imgLists",t.imgLists),(0,s.J5)({method:"post",url:"/root/uploadProblem",params:{unit:e},data:a})}}}]);
//# sourceMappingURL=381.11df3e17.js.map